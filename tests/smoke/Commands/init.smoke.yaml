working-directory: ./../../../tests/

tests:
  - name: init
    command:
      shell:
        - bash
      script: |
        temp=$(mktemp -d)
        trap 'rm -rf -- "$temp"' EXIT
        cd $temp
        echo -e 'abc\n\n\n' | juvix init
        cat juvix.yaml
    stdout:
      contains:
        "name: abc"
    exit-status: 0
  - name: init-does-not-contain-file-field
    command:
      shell:
        - bash
      script: |
        temp=$(mktemp -d)
        trap 'rm -rf -- "$temp"' EXIT
        cd $temp
        echo -e 'abc\n\n\n' | juvix init
        cat juvix.yaml
    stdout:
      matches:
        regex: |-
          ^((?!file:).)*$
        options:
          - dot-all
    exit-status: 0
