working-directory: ./../../../examples/

tests:
  - name: html-stdout
    command:
      shell:
        - bash
      script: |
        cd milestone/HelloWorld
        juvix html HelloWorld.juvix --only-source
        cat html/HelloWorld.html
    stdout:
      contains:
        <!DOCTYPE HTML>
    exit-status: 0

  - name: output-dir
    command:
      shell:
        - bash
      script: |
        rm -rf html
        juvix html milestone/HelloWorld/HelloWorld.juvix --only-source --output-dir=html --non-recursive
        [ -d html/assets ]
        [ -f html/HelloWorld.html ]
    stdout:
      matches: |
        Copying assets files to .*
        Writing .*HelloWorld.html
    exit-status: 0
