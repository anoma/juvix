working-directory: ./../../../tests/
tests:
  - name: typecheck-help
    command: 
      - juvix 
      - typecheck
      - --help
    exit-status: 0
    stdout:
      contains:
        "Usage: juvix typecheck JUVIX_FILE"

  - name: typecheck-simple
    command:
      - juvix
      - typecheck
    args:
      - positive/Internal/Simple.juvix
    exit-status: 0
    stdout: "Well done! It type checks\n"

  - name: typecheck-only-errors
    command:
      - juvix
      - --only-errors
      - typecheck
    args:
      - positive/Internal/Simple.juvix
    exit-status: 0
    stdout: ""

  - name: typechecking-error
    command:
      - juvix
      - --no-colors
      - typecheck
    args:
      - negative/Internal/MultiWrongType.juvix
    exit-status: 1
    stdout: ""
    stderr: 
      matches:
        regex: |-
          (.+)\/([^\/]+)\.juvix\:[0-9]*\:[0-9]*\-[0-9]*\: error